# Модуль SEO для битрикс

Модуль перебивает seo мета-теги title, h1 и description.
Но при соблюдении следующих условий:

0. `title` - задан функцией "`<title><? $APPLICATION->ShowTitle(false);?> </title>`"
1. `h1` - задан функцией "`<h1><?= $APPLICATION->GetDirProperty("h1") ?></h1>`" на не детальных страницах, чтобы подтягивалось дефолтное значение из `.section` для детальных страниц "`<h1><?= $APPLICATION->GetPageProperty("h1", $arResult["NAME"]) ?></h1>`", чтобы при отсутствии значение выводился заголовок элемента
2. `description` - вообще никак не затронут (можно задавать дефолтное значение в файле `.section.php` раздела)

`пример файла .section`
```
$sSectionName = "Главная";
    $arDirProperties = Array(
    "description" => "Дизайнерское бюро MILLENNIUM ARCHITECTS",
    "h1" => "Дизайнерское бюро MILLENNIUM ARCHITECTS",
);
```
## Установка
Установи модуль и создай запись в созданном highload-блоке
## Особенности

0. При установке модуля атоматически создается highloadblock AffettaSeoInfoHB со всеми необходимыми параметрами. ID созданого инфоблока записывается в поле "ID Highload-блока работающего с СЕО" в настройках модуля affettaseo.
1. При удалении модуля ни highloadblock AffettaSeoInfoHB, ни дополнительные пользовательские поля созданные для него не удаляются.
2. Модуль подцепляется к двум событиям `OnPageStart` - чтобы задать h1 `OnEpilog` - чтобы задать description и title
3. Модуль кэшируется. В настройках модуля есть кнопка очистить кэш модуля. При изменении данных в highload-блоке нужно его сбрасывать или подождать час
___
## Почему GetDirProperty а не ShowProperty

`ShowProperty` - динамическая функция вывода свойства. Она сначала ставит заглушку и потом после формирования буфера доставляет данные по заглушкам. Эта опирация ломает верстку при активации кэширования. Динамические функции при исполнении в буферной зоне вызывают баги кэширования битрикса. 
